{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saoir\\\\Downloads\\\\labMoviesApp-main\\\\labMoviesApp-main\\\\src\\\\pages\\\\similarMoviesPage.js\",\n    _this = this;\n\nimport React from \"react\";\nimport PageTemplate from \"../components/templateMovieListPage\";\nimport { useQuery } from 'react-query';\nimport Spinner from '../components/spinner';\nimport { getSimilarMovies } from '../api/tmdb-api';\nimport AddToPlaylistIcon from '../components/cardIcons/addToMustWatch';\nimport { useParams } from 'react-router-dom';\nimport AddToFavouritesIcon from '../components/cardIcons/addToFavourites';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar SimilarMoviesPage = function SimilarMoviesPage(props) {\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useQuery = useQuery( // the cache entry key is a serializable array\n  [\"similar\", {\n    id: id\n  }], getSimilarMovies),\n      similar = _useQuery.data,\n      error = _useQuery.error,\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError;\n\n  console.log(similar);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 25\n  }, _this);\n  if (isError) return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: error.message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 23\n  }, _this);\n  var movies = similar.results; // *******************\n  // // console.log(data)\n\n  var favorites = movies.filter(function (m) {\n    return m.favorite;\n  });\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n  var mustWatch = movies.filter(function (m) {\n    return m.mustWatch;\n  });\n  localStorage.setItem('mustWatch', JSON.stringify(mustWatch));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: similar ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(PageTemplate, {\n        title: \"Similar Movies\",\n        movies: movies,\n        action: function action(movie) {\n          return /*#__PURE__*/_jsxDEV(AddToFavouritesIcon, {\n            movie: movie\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 16\n          }, _this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Waiting for movie details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false);\n};\n\nexport default SimilarMoviesPage;","map":{"version":3,"names":["React","PageTemplate","useQuery","Spinner","getSimilarMovies","AddToPlaylistIcon","useParams","AddToFavouritesIcon","SimilarMoviesPage","props","id","similar","data","error","isLoading","isError","console","log","message","movies","results","favorites","filter","m","favorite","localStorage","setItem","JSON","stringify","mustWatch","movie"],"sources":["C:/Users/saoir/Downloads/labMoviesApp-main/labMoviesApp-main/src/pages/similarMoviesPage.js"],"sourcesContent":["import React from \"react\";\nimport PageTemplate from \"../components/templateMovieListPage\";\nimport { useQuery } from 'react-query'\nimport Spinner from '../components/spinner'\nimport {getSimilarMovies} from '../api/tmdb-api'\nimport AddToPlaylistIcon from '../components/cardIcons/addToMustWatch';\nimport { useParams } from 'react-router-dom';\nimport AddToFavouritesIcon from '../components/cardIcons/addToFavourites'\nconst SimilarMoviesPage = (props) => {\n  const { id } = useParams();\n  const { data: similar, error, isLoading, isError } = useQuery(\n    // the cache entry key is a serializable array\n    [\"similar\", { id: id }],\n    getSimilarMovies\n  );\n  console.log(similar)\n  if (isLoading) return <Spinner/>\n  if (isError) return <h1>{error.message}</h1>\n   const movies = similar.results;  // *******************\n  // // console.log(data)\n    const favorites = movies.filter(m => m.favorite)\n    localStorage.setItem('favorites', JSON.stringify(favorites))\n  const mustWatch = movies.filter(m => m.mustWatch)\n  localStorage.setItem('mustWatch', JSON.stringify(mustWatch))\n  return (\n    <>\n      {similar ? (\n        <>\n          <PageTemplate\n          title=\"Similar Movies\"\n          movies={movies}\n              action={(movie) => {\n        return <AddToFavouritesIcon movie={movie} />\n      }}\n      />\n        </>\n      ) : (\n        <p>Waiting for movie details</p>\n      )}\n    </>\n  );\n};\nexport default SimilarMoviesPage;\n\n\n\n\n\n\n\n\n\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,qCAAzB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAAQC,gBAAR,QAA+B,iBAA/B;AACA,OAAOC,iBAAP,MAA8B,wCAA9B;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,mBAAP,MAAgC,yCAAhC;;;;AACA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,KAAD,EAAW;EACnC,iBAAeH,SAAS,EAAxB;EAAA,IAAQI,EAAR,cAAQA,EAAR;;EACA,gBAAqDR,QAAQ,EAC3D;EACA,CAAC,SAAD,EAAY;IAAEQ,EAAE,EAAEA;EAAN,CAAZ,CAF2D,EAG3DN,gBAH2D,CAA7D;EAAA,IAAcO,OAAd,aAAQC,IAAR;EAAA,IAAuBC,KAAvB,aAAuBA,KAAvB;EAAA,IAA8BC,SAA9B,aAA8BA,SAA9B;EAAA,IAAyCC,OAAzC,aAAyCA,OAAzC;;EAKAC,OAAO,CAACC,GAAR,CAAYN,OAAZ;EACA,IAAIG,SAAJ,EAAe,oBAAO,QAAC,OAAD;IAAA;IAAA;IAAA;EAAA,SAAP;EACf,IAAIC,OAAJ,EAAa,oBAAO;IAAA,UAAKF,KAAK,CAACK;EAAX;IAAA;IAAA;IAAA;EAAA,SAAP;EACZ,IAAMC,MAAM,GAAGR,OAAO,CAACS,OAAvB,CAVkC,CAUD;EAClC;;EACE,IAAMC,SAAS,GAAGF,MAAM,CAACG,MAAP,CAAc,UAAAC,CAAC;IAAA,OAAIA,CAAC,CAACC,QAAN;EAAA,CAAf,CAAlB;EACAC,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeP,SAAf,CAAlC;EACF,IAAMQ,SAAS,GAAGV,MAAM,CAACG,MAAP,CAAc,UAAAC,CAAC;IAAA,OAAIA,CAAC,CAACM,SAAN;EAAA,CAAf,CAAlB;EACAJ,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeC,SAAf,CAAlC;EACA,oBACE;IAAA,UACGlB,OAAO,gBACN;MAAA,uBACE,QAAC,YAAD;QACA,KAAK,EAAC,gBADN;QAEA,MAAM,EAAEQ,MAFR;QAGI,MAAM,EAAE,gBAACW,KAAD,EAAW;UACzB,oBAAO,QAAC,mBAAD;YAAqB,KAAK,EAAEA;UAA5B;YAAA;YAAA;YAAA;UAAA,SAAP;QACD;MALG;QAAA;QAAA;QAAA;MAAA;IADF,iBADM,gBAWN;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAZJ,iBADF;AAiBD,CAjCD;;AAkCA,eAAetB,iBAAf"},"metadata":{},"sourceType":"module"}